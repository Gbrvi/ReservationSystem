@using Reservation.ViewModel
@using Reservation.Data.Enum
@model EditRoomViewModel

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0">Editar Sala</h2>
        </div>
        <div class="card-body">
            <form method="post" asp-action="Edit" enctype="multipart/form-data">
                <div class="mb-3">
                    <label asp-for="RoomNumber" for="roomNumber" class="form-label">Número da Sala</label>
                    <input asp-for="RoomNumber" type="text" class="form-control" id="roomNumber" maxlength="10" placeholder="Digite o número da sala" required>
                </div>

                <div class="mb-3">
                    <label asp-for="Capacity" for="capacity" class="form-label">Capacidade</label>
                    <input asp-for="Capacity" type="number" class="form-control" id="capacity" placeholder="Digite a capacidade">
                </div>

                <div class="mb-3">
                    <label asp-for="SizeInSquareMeters" for="size" class="form-label">Tamanho (m²)</label>
                    <input asp-for="SizeInSquareMeters" type="number" class="form-control" id="size" step="0.01" placeholder="Digite o tamanho">
                </div>

                <div class="mb-3">
                    <label asp-for="RoomStatus" for="status" class="form-label">Status</label>
                    <select asp-for="RoomStatus" asp-items="@Html.GetEnumSelectList<EnumRoomStatus>()" class="form-select" id="status" required>
                    </select>
                    <span asp-validation-for="RoomStatus" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="RoomPrice" for="price" class="form-label">Preço</label>
                    <input asp-for="RoomPrice" type="number" class="form-control" id="price" step="0.01" placeholder="Digite o preço" required>
                </div>

                <div class="mb-3">
                    <label for="images" class="form-label">Upload de Imagens</label>
                    <input asp-for="RoomImages" type="file" class="form-control" id="images" multiple>
                </div>

                @if (Model.ExistingImages != null && Model.ExistingImages.Any())
                {
                    <div class="mb-3">
                        <h5>Imagens Atuais:</h5>
                        <div class="d-flex flex-wrap gap-3">
                            @for (int i = 0; i < Model.ExistingImages.Count; i++)
                            {
                                var imageBase64 = Convert.ToBase64String(Model.ExistingImages[i]);
                                <div class="d-flex flex-column align-items-center">
                                    <img src="data:image;base64,@imageBase64" class="img-thumbnail mb-2" alt="Imagem da Sala" style="max-width: 150px; height: auto;">
                                    <div>
                                        <input type="checkbox" name="DeleteImages" value="@i" class="form-check-input">
                                        <label class="form-check-label">Deletar</label>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }

                <div class="form-check mb-3">
                    <input asp-for="HasInternet" type="checkbox" class="form-check-input" id="internet">
                    <label asp-for="HasInternet" class="form-check-label" for="internet">Internet</label>
                </div>

                <div class="form-check mb-3">
                    <input asp-for="HasSecurityCamera" type="checkbox" class="form-check-input" id="securityCamera">
                    <label asp-for="HasSecurityCamera" class="form-check-label" for="securityCamera">Câmera de Segurança</label>
                </div>

                <div class="form-check mb-3">
                    <input asp-for="HasAirConditioning" type="checkbox" class="form-check-input" id="airConditioning">
                    <label asp-for="HasAirConditioning" class="form-check-label" for="airConditioning">Ar-condicionado</label>
                </div>

                <div class="mb-3">
                    <label asp-for="RoomType" class="form-label">Tipo de Sala</label>
                    <select asp-for="RoomType" asp-items="@Html.GetEnumSelectList<EnumRoomType>()" class="form-select">
                    </select>
                    <span asp-validation-for="RoomType" class="text-danger"></span>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-outline-primary">Salvar Alterações</button>
                </div>
            </form>
        </div>
        <div class="card-footer text-center">
            <a asp-controller="Room" asp-action="Index" class="btn btn-secondary">Voltar</a>
        </div>
    </div>
</div>
